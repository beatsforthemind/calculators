<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mortgage Calculator</title>
  </head>
  <body>
	<h3>Calculate your monthly mortgage payment</h3><br>
    <!-- No input is currently validated, which is, you know, bad -->
    <input type="number" id="amount">Amount borrowed</input><br>
	<input type="number" id="term">Term (in years)</input><br>
	<input type="number" id="apr">APR</input><br>
	<input type="number" id="escrow">Taxes + Insurance (annual)</input><br>
	<input type="button" onClick="calculate()" value="Calculate!" /><br><br>
	<div id="output"></div>
  
    <script>
		function calculate() {
			amountBorrowed = Number(document.getElementById("amount").value);
			term = Number(document.getElementById("term").value);
			totalAmount = amountBorrowed + (Number(document.getElementById("escrow").value) * term);
			apr = (Number(document.getElementById("apr").value) * 0.01); //this needs to be a percent, not an int
			mpr = apr / 12; //monthly percentage rate
			numberOfPayments = term * 12;
			intPaid = Math.pow(1 + mpr, numberOfPayments);
			monthlyPaymentAmount = numberWithCommas(((totalAmount * mpr * intPaid)/(intPaid - 1)).toFixed(2));
			totalIntPaid = numberWithCommas(((monthlyPaymentAmount * numberOfPayments) - amountBorrowed).toFixed(2));
			outputStr = "Monthly Payment Amount: $" + monthlyPaymentAmount + "<br>Total Interest Paid: $" + totalIntPaid;
			document.getElementById("output").innerHTML = outputStr;
			
			//for (i = 1; i < numberOfPayments; i++) {
				
			//}
		}
		
		function numberWithCommas(x) { //credit to Elias Zamaria on StackOverflow for this function
			return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
		}
    </script>
  </body>
</html>